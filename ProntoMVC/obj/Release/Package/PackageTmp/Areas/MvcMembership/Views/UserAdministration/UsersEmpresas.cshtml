@using System.Globalization
@model ProntoMVC.Areas.MvcMembership.Models.UserAdministration.DetailsViewModel
@{
    ViewBag.Title = "User Details: " + Model.DisplayName;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href='@Url.Content("~/Content/MvcMembership.css")' rel="stylesheet" type="text/css" />
<h2 class="mvcMembership">
    @Model.DisplayName [@Model.Status]</h2>
<ul class="mvcMembership-tabs">
    <li>@Html.ActionLink("Detalles", "Details", "UserAdministration", new { id = Model.User.ProviderUserKey }, null)</li>
    <li>Empresas</li>
    <li>@Html.ActionLink("Contraseña", "Password", "UserAdministration", new { id = Model.User.ProviderUserKey }, null)</li>
    <li>@Html.ActionLink("Roles", "UsersRoles", "UserAdministration", new { id = Model.User.ProviderUserKey }, null)</li>
</ul>
<h3 class="mvcMembership">
    Empresas</h3>
<div class="mvcMembership-userRoles">
    @foreach (var empresa in Model.Empresas)
    {

        if (empresa.Key == "") { continue; }
        
        <div class="row-fluid">
            <div class="span2">
                @Html.ActionLink(empresa.Key, "empresa", new { id = empresa.Key })
            </div>
            <div class="span4">
                @if (empresa.Value)
                {
                    using (Html.BeginForm("RemoveFromEmpresa", "UserAdministration", new { id = Model.User.ProviderUserKey, empresa = empresa.Key }))
                    {
                    <input type="submit" value="Quitar" />
                    
                     

                    @*
                    @Html.ActionLink("Accesos detalle", "Edit", "Acceso", new { Area = "", id = empleadoEnEstaEmpresa(empresa.Key, Model.User.ProviderUserKey) }, new { })
                    *@

                    }
                }
                else
                {
                    using (Html.BeginForm("AddToEmpresa", "UserAdministration", new { id = Model.User.ProviderUserKey, empresa = empresa.Key }))
                    {
                    <input type="submit" value="Agregar" />
                    }
                }
            </div>
        </div>          
    }
</div>
</div> 