@using PagedList.Mvc
@model ProntoMVC.Areas.MvcMembership.Models.UserAdministration.IndexViewModel
@{
    ViewBag.Title = "Administración";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href='@Url.Content("~/Content/MvcMembership.css")' rel="stylesheet" type="text/css" />
<link href='@Url.Content("~/Content/PagedList.css")' rel="stylesheet" type="text/css" />
@if (!Model.IsRolesEnabled)
{
    <p class="mvcMembership-warning">
        WARNING: Your Role Provider is currently disabled - any user may currently visit
        this page.<br />
        Change &lt;roleManager enabled="false"&gt; to &lt;roleManager enabled="true"&gt;
        in your web.config file.</p>
}
<div class="container-fluid">
    <br />
    <div class="" style='font-size: 34px; margin-top: 5px; height: 60px; font-weight: 400;
        text-shadow: 0 1px 0  lightgray; font-family: "Segoe UI Web Regular", "Segoe UI", "Lucida", Tahoma, Arial,"sans-serif"'>
        Administración de Usuarios
    </div>
        
  

    <div class="row-fluid">
        <div class="span2 lightblue">
            <button onclick="window.location.href='@Url.Action("CreateUser", new { id = -1 })'" class="btn btn-primary">
                Nuevo Usuario Interno
            </button>
        </div>

        <div class="span2 lightblue">
          @Html.ActionLink( "Ir a usuarios externos","IndexAdminExterno", "UserAdministration")

        </div>


        @ViewBag.Alerta
        @TempData["message"]
        @if (ViewBag.Alerta != null)
        {
            <div id="mensajeLocal" class="alert " style="display: none">
                <button type="button" class="close" data-dismiss="alert">
                    &times;</button>
                <strong>Alerta</strong> @ViewBag.Alerta
            </div>
        }
        @if (false)
        {
            <div class="span4 lightblue">
                <div class="input-append">
                    <input id="SuperBuscador2" type="text" class="pull-left" style="" placeholder="Buscar en usuarios">
                    @*class="search-query pull-left"*@
                    <button type="button" class="btn pull-left" style="">
                        <i class="icon-search"></i>
                    </button>
                </div>
            </div>
        }
        <h2 class="mvcMembership">
            @* User Administration*@</h2>
        @*  <h3 class="mvcMembership">
        Find a User
        @if (!string.IsNullOrWhiteSpace(Model.Search))
        { 
            <span>(@Html.ActionLink("Clear Search", "Index"))</span>
        }
    </h3>*@
        <form method="get" class="mvcMembership-searchForm">
        @*   <fieldset>
        <label>
             User Name or Email Address:
            <input type="text" name="search" value="@Model.Search" />
            <input type="submit" value="Search" />
        </label>
    </fieldset>*@
        </form>
        @*        Un SuperAdmin puede hacer lo que quiera, incluyendo crear otros SuperAdmin,
        <br />
        Un Admin solo puede otorgar los roles y las bases que él mismo tiene.
        <br />*@
        <br />
        <h3 class="mvcMembership">
            @*  Users (@Html.ActionLink("New User", "CreateUser", "UserAdministration"))*@</h3>
    </div>
    <div class="mvcMembership-allUsers">
        @if (Model.Users != null)
        {
            if (Model.Users.Count > 0)
            {
            
            <style>
                .cc
                {
                    -moz-transform: rotate(320deg) !important;
                    -moz-transform-origin: bottom left !important;
                    -webkit-transform: rotate(320deg) !important;
                    -webkit-transform-origin: bottom left !important;
                    -o-transform: rotate(320deg) !important;
                    -o-transform-origin: bottom left !important;
                    vertical-align: middle;
                    font-size: 12px;
                }
            </style>
            
            
            <br />            
            <ul class="mvcMembership mvcMembership-users">
                <div class="row-fluid">
                    <div class="span2 lightblue" style="cc">
                        Usuario
                    </div>
                    <div class="span3 lightblue">
                        <div class="span1 lightblue">
                            @if (Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                            {
                                <div class="cc">
                                    SuperAdmin
                                </div>
                            }
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                Administrador
                            </div>
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                Comercial
                            </div>
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                FacturaElect
                            </div>
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                Requerimientos
                            </div>
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                AdminExterno
                            </div>
                        </div>
                        <div class="span1 lightblue">
                            <div class="cc">
                                Externo
                            </div>
                        </div>
                        <div class="span2 lightblue">
                        </div>
                    </div>
                    <div class="span3 lightblue" style="">
                        Base default
                    </div>
                    <div class="span2 lightblue" style="">
                        @*Correo*@
                    </div>
                </div>
                <script>

                    function ActualizarListaBasesDelUsuario(Userguid, jqdropdown) {
                        $.ajax({
                            type: 'POST',
                            url: '@Url.Action("BasesPorUsuarioColeccionAAA")',
                            data: { IdCodigoIVA: $('#IdCodigoIva').val() },
                            success: function (data) {
                                var markup = '';
                                for (var x = 0; x < data.length; x++) {
                                    //markup += '<option value="' + data[x].id + '">' + data[x].value + '</option>';
                                    markup += '<option value="' + data[x].value + '">' + data[x].value + '</option>';
                                }
                                //$('#PuntoVenta').html(markup).show();
                                jqdropdown.html(markup).show();
                                var myDDL = jqdropdown; //$('#PuntoVenta');
                                myDDL[0].selectedIndex = 0;
                                ActualizarPuntoVenta();
                            }
                        })
                    }
            
                </script>
                @foreach (ProntoMVC.Areas.MvcMembership.Models.UserAdministration.UsuarioPronto usPronto in Model.UsuariosPronto)
                {

                    MembershipUser user = usPronto.user;

                    if (!Generales.EsUsuarioControlablePorAdmin(user.UserName, ViewBag.NombreUsuario)) { continue; }
                    
                    <div class="row-fluid">
                        <div class="span2 lightblue">
                            <span class="mvcMembership-username">@Html.ActionLink(user.UserName, "Details", new { id = user.ProviderUserKey })</span>
                            <span class="mvcMembership-username">@Html.ActionLink("empl", "Edit", "Empleado", new { nombre = user.UserName, area = "" }, null)</span>
                            <span class="mvcMembership-username">@Html.ActionLink("acc", "Edit", "Acceso", new { nombre = user.UserName, area = "" }, null)</span>
                            
                        </div>
                        <div class="span3 lightblue">
                            <div class="span1 lightblue">
                                @if (Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsSuperAdmin" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "SuperAdmin"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if (Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador") || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsAdmin" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "Administrador"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if ((Roles.IsUserInRole(ViewBag.NombreUsuario, "Comercial") && Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador")) || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsComercial" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "Comercial"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if ((Roles.IsUserInRole(ViewBag.NombreUsuario, "FacturaElectronica") && Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador")) || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsFacturaElectronica" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "FacturaElectronica"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if ((Roles.IsUserInRole(ViewBag.NombreUsuario, "Requerimientos") && Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador")) || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsRequerimientos" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "Requerimientos"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if ((Roles.IsUserInRole(ViewBag.NombreUsuario, "Requerimientos") && Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador")) || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsAdminExterno" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "AdminExterno"))
                                }
                            </div>
                            <div class="span1 lightblue">
                                @if ((Roles.IsUserInRole(ViewBag.NombreUsuario, "Requerimientos") && Roles.IsUserInRole(ViewBag.NombreUsuario, "Administrador")) || Roles.IsUserInRole(ViewBag.NombreUsuario, "SuperAdmin"))
                                {
                                    @Html.CheckBox("EsExterno" + user.ProviderUserKey, Roles.IsUserInRole(user.UserName, "Externo"))
                                }
                            </div>
                            <script language="javascript" type="text/javascript">

                                //   $("#ActualizarRenglon").click(function () { });

                                function Actualizar(id) {

                                    // alert('uy');

                                    var requestData = {
                                        id: id,
                                        EsSuperAdmin: $("#EsSuperAdmin" + id).attr('checked') == "checked",
                                        EsAdmin: $("#EsAdmin" + id).attr('checked') == "checked",
                                        EsComercial: $("#EsComercial" + id).attr('checked') == "checked",
                                        EsFacturaElec: $("#EsFacturaElectronica" + id).attr('checked') == "checked",
                                        EsRequerimientos: $("#EsRequerimientos" + id).attr('checked') == "checked",
                                        BaseDefault: $("#Bases" + id + " option:selected").text()
                                    };


                                    $.ajax({
                                        url: 'UserAdministration/ActualizarRenglon',
                                        type: 'POST',
                                        data: JSON.stringify(requestData),
                                        dataType: 'json',
                                        contentType: 'application/json; charset=utf-8',
                                        success: function (result) {
                                            if (result) {
                                                alert('Actualizado');
                                                //                    grid1.trigger('reloadGrid');

                                                //                    $('html, body').css('cursor', 'auto');

                                                //                    //window.location.replace(ROOT + "Cliente/index");
                                                //                    window.location = (ROOT + "Factura/index");

                                            } else {
                                                // window.location.replace(ROOT + "Cliente/index");


                                                //                    alert('No se pudo grabar el comprobante.');
                                                //                    $('.loading').html('');

                                                //                    $('html, body').css('cursor', 'auto');
                                                //                    $('#grabar2').attr("disabled", false).val("Guardar");
                                            }


                                        },


                                        error: function (xhr) {
                                            //alert('Error: ' + xhr.statusText);
                                        },


                                        //                                        error: function (xhr, textStatus, exceptionThrown) {
                                        //                                            var errorData = $.parseJSON(xhr.responseText);
                                        //                                            var errorMessages = [];
                                        //                                            //this ugly loop is because List<> is serialized to an object instead of an array
                                        //                                            for (var key in errorData) {
                                        //                                                errorMessages.push(errorData[key]);
                                        //                                            }
                                        //                                            $('#result').html(errorMessages.join("<br />"));
                                        //                                            $('html, body').css('cursor', 'auto');
                                        //                                            $('#grabar2').attr("disabled", false).val("Guardar");
                                        //                                            alert(errorMessages.join("<br />"));


                                        //                                        },

                                        async: true,
                                        processData: false
                                    });
                                };
                            </script>
                        </div>
                        <div class="span2 lightblue">
                            @{
                                MembershipUser u = Membership.GetUser(user.ProviderUserKey);
                                var c = new ProntoMVC.Controllers.AccountController();
                                string nombrebase = c.BuscarUltimaBaseAccedida(u.UserName);
                                @Html.Raw(nombrebase.NullSafeToString());
                            }
                            @if (false)
                            {
                                @Html.DropDownList("Bases" + user.ProviderUserKey, (IEnumerable<SelectListItem>)ViewData["Bases"], usPronto.EmpresaDefault ?? "", new { @class = "span12" })
                            }
                            @if (false)
                            {
                                @Html.ActionLink("crear base", "CrearBaseyAsignarEmpleado", new { id = user.ProviderUserKey, nombrebaseoriginal = "wDemoWilliams", nombrebasenueva = "" })
                            }
                        </div>
                        <div class="span1 lightblue">
                            <input type="button" class="btn " id="@user.ProviderUserKey"   value="actualizar" name="@user.ProviderUserKey"
                            onclick="Actualizar('@user.ProviderUserKey')"  
                             /></div>
                        <div class="span4 lightblue" style="font-size: 10px">
                            <span class="mvcMembership-email"><a href="mailto:@user.Email">@user.Email</a></span>
                            @if (user.IsOnline)
                            {
                                <span class="mvcMembership-isOnline">Online</span>
                            }
                            else
                            {
                                <span class="mvcMembership-isOffline">Offline por
                                    @{
                                var offlineSince = (DateTime.Now - user.LastActivityDate);
                                if (offlineSince.TotalSeconds <= 60)
                                {
                                        <text>1 minuto.</text>
                                }
                                else if (offlineSince.TotalMinutes < 60)
                                {
                                        <text>@Math.Floor(offlineSince.TotalMinutes) minutos.</text>
                                }
                                else if (offlineSince.TotalMinutes < 120)
                                {
                                        <text>1 hora</text>
                                }
                                else if (offlineSince.TotalHours < 24)
                                {
                                        <text>@Math.Floor(offlineSince.TotalHours) horas.</text>
                                }
                                else if (offlineSince.TotalHours < 48)
                                {
                                        <text>1 día.</text>
                                }
                                else
                                {
                                        <text>@Math.Floor(offlineSince.TotalDays) días.</text>
                                }
                                    }
                                </span>
                          
       
                            }
                            @if (@user.IsLockedOut)
                            { <text>Bloqueado!</text> }
                            @if (!string.IsNullOrEmpty(user.Comment))
                            {
                                <span class="mvcMembership-comment">@user.Comment</span>
                            }
                        </div>
                        @*notificacion (por usuario)*@
                    </div>
                   
                }
            </ul>
            
            
@*  @Html.PagedListPager(Model.Users, page => Url.Action("Index", new { page, search = Model.Search }))*@
            }
            else
            {
            <p>
                No users have registered.</p>
            }
        }
    </div>
    @if (Roles.IsUserInRole("SuperAdmin") || Roles.IsUserInRole("Administrador"))
    {
        <br />
        
@*        <a class="btn " href="UserAdministration/Configuracion">Configuracion </a>*@
        <br />
        
    }
    @if (Model.BasesPronto != null)
    {

        if (Roles.IsUserInRole("SuperAdmin"))
        {
        
        
            
        
@*  <h3 class="mvcMembership">
            Roles</h3>*@
        
                
        
        <div>
            <table id="Lista" class="scroll" cellpadding="0" cellspacing="0">
            </table>
            <div id="ListaPager" class="scroll" style="text-align: center;">
            </div>
            <script>
                $('#Lista').jqGrid({
                    url: '@Url.Action("Usuarios", "Account", new { area = "" })',

                    datatype: 'json',
                    mtype: 'POST',
                    colNames: ['', '', 'IdFactura', 'Usuario',
                            '',

                            '',
                           '',
                          '',
                           '',
                           '',

                            '',
                          '',
                            '',
                            '',
                            '',

                           '',
                            '',
                            '',
                        '',
                           '',
                            '',
                          '',
                           '',
                           '',
                           '',
                            '', '',
                           '',
                       '',
                          '',
                            '',
                           '',
                            ' .',
                            '',
                            '',
                            ''



            ],




                    colModel: [
                        { name: 'act', index: 'act', align: 'center', width: 50, sortable: false, editable: false, search: false }, //, formatter: 'showlink', formatoptions: { baseLinkUrl: '@Url.Action("Edit")'} },
                        {name: 'Imprimir', index: 'Imprimir', align: 'center', width: 50, sortable: false, editable: false, search: false }, //, formatter: 'showlink', formatoptions: { baseLinkUrl: '@Url.Action("Imprimir")'} },
                        {name: 'IdFactura', index: 'IdFactura', align: 'left', width: 0, editable: false, hidden: true },
                        { name: 'TipoABC', index: 'TipoABC', align: 'center', width: 50, editable: false, search: true, searchoptions: { sopt: ['eq']} },
                        { name: 'PV', index: 'PuntoVenta', align: 'center', width: 50, editable: false, search: true, searchoptions: { sopt: ['eq']} },

   { name: '', index: '', align: 'right', width: 70, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 50, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 50, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 400, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 100, editable: false, search: true, searchoptions: { sopt: ['cn']} },

   { name: '', index: '', align: 'left', width: 100, editable: false, search: true, searchoptions: { sopt: ['cn']} },

   { name: 'Fecha', index: '', align: 'left', width: 100, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 50, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 50, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: 'subtotal', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 80, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: 'Moneda', index: '', align: 'center', width: 40, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'right', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} },
   { name: '', index: '', align: 'left', width: 0, editable: false, search: true, searchoptions: { sopt: ['cn']} }






                    ],
                    onSelectRow: function (id) {
                        if (id && id !== lastSelectedId) {
                            if (typeof lastSelectedId !== "undefined") {
                                grid.jqGrid('restoreRow', lastSelectedId);
                            }
                            lastSelectedId = id;
                        }
                    },
                    ondblClickRow: function (idrow) {
                        window.location.href = ROOT + 'Factura/Edit/' + idrow;

                    },
                    pager: $('#ListaPager'),
                    rowNum: 15,
                    rowList: [10, 20, 50, 100],
                    sortname: 'FechaFactura',
                    sortorder: 'desc',
                    viewrecords: true,
                    //toppager: true,

                    emptyrecords: 'No hay registros para mostrar',

                    ///////////////////////////////
                    width: 'auto', // 'auto',
                    autowidth: true,
                    shrinkToFit: false,
                    //////////////////////////////

                    height: $(window).height() - ALTOLISTADO, // '100%'
                    altRows: false,
                    footerrow: false, //true,
                    userDataOnFooter: true
                    // ,caption: '<b>PEDIDOS</b>'


              , multiboxonly: true

                });
                //jQuery("#Lista").jqGrid('navGrid', '#ListaPager', { edit: false, add: false, del: false, refresh: true, search: true });
                jQuery("#Lista").jqGrid('navGrid', '#ListaPager', { refresh: true, add: false, edit: false, del: false }, {}, {}, {}, { sopt: ["cn"], width: 700, closeOnEscape: true, closeAfterSearch: true });

                jQuery("#Lista").jqGrid('gridResize', { minWidth: 350,
                    maxWidth: 1500,
                    minHeight: 80, maxHeight: 500
                });


            </script>
        </div>
        
        
        
        <div class="mvcMembership-allRoles">
            <div class="row-fluid">
                <div class="span2 ">
                    Conexion Bdlmaster</div>
                <div class="span8 ">
                    @Html.DropDownList("BDLMaster", null, new { @class = "span8" })</div>
                <div class="span2 ">
                    @*   @Html.ActionLink("cambiar", "CambiarBDLmaster", new { sc = Model.BDLMaster })*@
                    <button id="cambiar2" class="btn btn-primary">
                        cambiar
                    </button>
                    <script>

                        $("#cambiar2").click(function () {

                            cambiarBase();
                        });


                        function cambiarBase() {
                            $.ajax({
                                type: 'POST',
                                url: '@Url.Action("CambiarBDLmaster")',
                                data: { sc: $('#BDLMaster').val() },
                                success: function (data) {
                                }
                            })
                        }
            
                    </script>
                </div>
            </div>
            @*         
"Data Source=MARIANO-PC;Initial Catalog=BDLMaster;user id=sa;password=3D1consultore5" providerName="System.Data.SqlClient"
"Data Source=tcp:m0lym24p49.database.windows.net,1433;Database=aspnetdb;User ID=Mariano@m0lym24p49;Password=tangalanga1234!;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;MultipleActiveResultSets=True;"  providerName="System.Data.SqlClient"
"Data Source=192.168.66.6;Initial Catalog=BDLMaster;Uid=sa; PWD=3D1consultore5;" providerName="System.Data.SqlClient"

         Que el superadmin pueda cambiar la conexion de la bdlmaster*@
            <br />
            <br />
            <div style="">
                <div>
                    @* base default<br />*@ Bases crear base nueva, agregar conexion. Crear/ver reclamo.
                    Exportar scripts. Ver modificaciones.doc.
                    <br />
                    <br />
                    @*                    version de SP tablas y sp mas usados ultimo acceso<br />
                    notificacion (por base) agregar automaticamente todas las bases del servidor
*@
                    <div>
                        @for (int i = 0; i < Model.BasesPronto.Count(); i++)
                        {
                            if ((Model.BasesPronto[i].Descripcion ?? "") != "")
                            {
                            <div class="row-fluid">
                                <div class="span2 lightblue">
                                    @Html.ActionLink(Model.BasesPronto[i].Descripcion, "Role", new { id = Model.BasesPronto[i].Descripcion })
                                </div>
                                <div class="span8 lightblue">
                                    @Html.TextBoxFor(m => m.BasesPronto[i].StringConection, new { @class = "span12" })
                                </div>
                                <div class="span2 lightblue">
                                    @Html.ActionLink("borrar", "BorrarConexion", new { id = Model.BasesPronto[i].Descripcion })
                                </div>
                            </div>
                            }
                        }
                    </div>
                </div>
                @if (false)
                {

                    if (Model.Roles.Count() > 0)
                    {
                    <ul class="mvcMembership">
                        @foreach (var role in Model.Roles)
                        {
                         
                            <div class="row-fluid">
                                <div class="span6 lightblue">
                                    @Html.ActionLink(role, "Role", new { id = role })
                                </div>
                                <div class="span6 lightblue">
                                    @*     @using (Html.BeginForm("DeleteRole", "UserAdministration", new { id = role }))
                                    {
                                        <input type="submit" value="Delete" class="btn " />
                                    }*@
                                </div>
                            </div>
                        }
                    </ul>
                    }
                    else
                    {
                    <p>
                        No roles have been created.</p>
                    }

                    using (Html.BeginForm("CreateRole", "UserAdministration"))
                    {
                    <fieldset>
                        <label for="id">
                            Role:</label>
                        @Html.TextBox("id")
                        <input type="submit" value="Create Role" />
                    </fieldset>
                    }
                }
            </div>
        </div>
        }
    }
</div>
<script>


    $(document).ready(function () {


        pageLayout.hide('east');

    });


</script>
