@model ProntoMVC.Data.Models.Presupuesto
@{
    ViewBag.Title = "Presupuesto";
}



@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formid" }))
{


    @Html.ValidationSummary(true)

    <script src="@Url.Content("~/Scripts/ScriptPresupuesto.js?1519")" type="text/javascript"></script>       @*aparentemente tengo que llamarla despues de cargar las div*@




    <div class="container-fluid" style="padding-left: 0px; padding-right: 0px;">
        <form class="form-horizontal" style=" margin-bottom: 0px;">


            @if (false)
            {
                <style>
                    /*http://stackoverflow.com/questions/6431881/css-layout-for-fixed-header-and-100-content-height*/
                    html, body {
                        height: 100%;
                        margin: 0;
                        padding: 0;
                    }

                    #wrapper {
                        width: 1000px;
                        height: 800px;
                        margin: auto;
                        position: relative;
                    }

                    #header {
                        height: 40px; /* set to desired height*/
                    }

                    #content {
                        position: absolute;
                        bottom: 0;
                        top: 40px; /*must match the height of #header*/
                        width: 100%;
                        overflow: auto;
                    }
                </style>
            }



            <div class="modal" id="loading">
                <label> Espere...</label>
                <img src="@Url.Content("~/Content/images/fhhrx.gif")" style="margin-right: 5px;" />
                Cargando...
            </div>
            <style>
                /* probando cómo zafar del color en los border del arbol de la izquierda */
                .ui-jqgrid tr.ui-row-ltr td {
                    border-color: rgb(234, 234, 234) /* rgba(213, 175, 175, 0); */;
                }
            </style>
            <style>
                .container-fluid {
                    /*    margin-right: 15px; */
                    padding-left: 0; /* padding-right: 0px ; */
                }

                form {
                    margin: 0 0 2px;
                }
            </style>
            <style>
                .ui-jqgrid tr.footrow-ltr td {
                    border-right-color: transparent !important;
                    border: 0 transparent !important;
                }
            </style>
            <style>
                .accordion-heading {
                    /*   font-size: 25px !important;  */
                }

                /* http://stackoverflow.com/questions/13778703/adding-open-closed-icon-to-twitter-bootstrap-collapsibles-accordions */
                .accordion-caret .accordion-toggle:hover {
                    text-decoration: none;
                }

                    .accordion-caret .accordion-toggle:hover span, .accordion-caret .accordion-toggle:hover strong {
                        text-decoration: underline;
                    }

                .accordion-caret .accordion-toggle:before {
                    font-size: 20px;
                    vertical-align: -3px;
                }

                .accordion-caret .accordion-toggle:not(.collapsed):before {
                    content: "▾";
                    margin-right: 0px;
                }

                .accordion-caret .accordion-toggle.collapsed:before {
                    content: "▸";
                    margin-right: 0px;
                }
            </style>
            @if (false)
            {


                <style>
                    /* jqGrid builds some additional divs over the main grid table. The outer div has the class ui-jqgrid. So if you need to remove right and left border existing over the whole grid you can use the following CSS: */

                    .ui-jqgrid {
                        border-right-width: 0px;
                        border-left-width: 0px;
                    }
                        /* If you need to remove all grid's borders you can use

                    .ui-jqgrid { border-width: 0px; }
                    If you want additionally remove vertical border between the cells in the grid you can use */

                        .ui-jqgrid tr.ui-row-ltr td {
                            /* border-right-color: transparent; */
                            border-right-color: #E4E4E4;
                        }




                        /*To remove horizontal border between the rows you can use */

                        .ui-jqgrid tr.ui-row-ltr td {
                            /* border-right-color: transparent; */
                            border-right-color: #E4E4E4;
                        }
                    /*To remove vertical borders between the column headers you can use */

                    th.ui-th-column {
                        /*    border-right-color: transparent !important; */
                        border-right-color: rgb(234, 234, 234) !important;
                    }
                    /* or alternatively (without the usage of !important) */

                    .ui-jqgrid-labels .ui-th-column {
                        /* border-right-color: transparent;*/
                        border-right-color: #E4E4E4;
                    }
                </style>
            }
            <style>
                /*  http://stackoverflow.com/questions/13103544/how-to-restrict-jqgrid-textarea-height-in-grid-only */
                tr.jqgrow > td.textInDiv > div {
                    max-height: 30px;
                    height: 30px;
                    overflow: auto;
                }

                td.form-view-data > span > div {
                    max-height: 30px;
                    height: 30px;
                    overflow: auto;
                }
            </style>

            <div id="cuerpomaspie" class="" style="padding-bottom:2px; position: relative;  " @*Height of the footer *@>


                @*http://stackoverflow.com/questions/6431881/css-layout-for-fixed-header-and-100-content-height*@



                <div id="conscroll" style="height: 600px; margin-bottom: 40px; overflow-y: scroll; top: 50px;
                padding-left: 25px; padding-right: 25px; overflow-x: hidden;">


                    <div class="row-fluid" style="margin-bottom: 15px; margin-top: 5px;">
                        @* <div class="span5 lightblue" style="font-weight: bold; font-size: 34px; vertical-align: "> *@


                        <div class="span6">
                            <div class="" style='font-size: 34px; margin-top: 5px; height: 45px; font-weight: 400;
                            text-shadow: 0 1px 0  lightgray; font-family: "Segoe UI Web Regular", "Segoe UI", "Lucida", Tahoma, Arial,"sans-serif"'>


                                <span class="span1" style="padding-top: 15px; width: 200px">Presupuesto </span>
                                @Html.TextBoxFor(model => model.Numero, new { style = "height: 50px ;  font-weight: 400; text-shadow: 0 1px 0  lightgray; font-size: 34px; border: 0; padding: 0 ; text-align: right; background: transparent;  font-family: 'Segoe UI Web Regular', 'Segoe UI', 'Lucida', Tahoma, Arial,'sans-serif';                    -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;                   ", @class = "span3", @readonly = "readonly" })
                                <span class="" style="padding-top: 15px; width: 10px">/ </span>
                                @Html.TextBoxFor(model => model.SubNumero, new { style = "width: 40px; height: 50px; font-weight: 400; text-shadow: 0 1px 0  lightgray; font-size: 34px; border: 0; padding: ; text-align: left; background: ;  font-family: 'Segoe UI Web Regular', 'Segoe UI', 'Lucida', Tahoma, Arial,'sans-serif';  ", @class = "span1" })
                            </div>
                        </div>

                        <div class="span6">
                            @*  <input type="button" id="grabar2" value="Aceptar" style="margin-top: 15px;" class="btn  btn-large btn-primary pull-right" />*@
                        </div>
                        <script>
                            $(function () {

                                function resizeInput() {
                                    // $(this).attr('size', $(this).val().length + 2);
                                    $(this).css('width', $(this).val().length * 32);
                                }


                                $('#SubNumero').keyup(resizeInput).each(resizeInput);

                                $('#Numero').css('width', $('#Numero').val().length * 21);

                            })
                        </script>



                    </div>





                    @*  <legend>Solicitud de cotizacion</legend>*@
                    <div>@Html.Hidden("IdPresupuesto", Model.IdPresupuesto)</div>
                    <div>@Html.Hidden("IdProveedor", Model.IdProveedor)</div>

                    <div>@Html.Hidden("Numero", Model.Numero)</div>



                    <div class="row-fluid">

                        <!--/span-->
                        <div class="span4 lightblue">
                            @Html.LabelFor(model => model.FechaIngreso, "Fecha")
                            @Html.TextBoxFor(model => model.FechaIngreso, new { @class = "span12" })
                            @Html.ValidationMessageFor(model => model.FechaIngreso)
                        </div>
                        <!--/span-->
                        <div class="span8 lightblue">
                            @Html.LabelFor(model => model.Proveedor.RazonSocial, "Proveedor")
                            <input class="span12" id="Proveedor" type="text" value="@Html.Raw(ViewBag.Proveedor)" />
                        </div>
                        <!--/span-->
                    </div>
                    <!--/row-->
                    <div class="row-fluid">
                        <div class="span4 lightblue">
                            @Html.LabelFor(model => model.IdComprador, "Comprador")
                            @Html.DropDownList("IdComprador", null, String.Empty, new { @class = "span12" })
                            @Html.ValidationMessageFor(model => model.IdComprador)
                        </div>
                        <!--/span-->
                        <div class="span8 lightblue">
                            @Html.LabelFor(model => model.LugarEntrega, "Lugar de entrega")
                            @Html.TextBoxFor(model => model.LugarEntrega, new { @class = "span12" })
                            @Html.ValidationMessageFor(model => model.LugarEntrega)
                        </div>
                        <!--/span-->
                    </div>
                    <!--/row-->
                    <div class="accordion" id="accordion2">




                        <div class="accordion-group" style="border: 0px; padding: 0px;">
                            <div class="accordion-heading" style="border: 0px; padding: 0px;">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"
                                   style="border: 0px; padding: 0px; color: #9C0000; font-size: 12px">
                                    más...
                                </a>
                            </div>
                            <div id="collapseOne" class="accordion-body collapse" style="border: 0px; padding: 0px;">
                                @*si pones "collapse in" empieza abierto*@
                                <div class="accordion-inner" style="border: 0px; padding: 0px;">
                                    <div class="row-fluid">
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.Aprobo, "Aprobo")
                                            @Html.DropDownList("Aprobo", null, String.Empty, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Aprobo)
                                        </div>
                                        <!--/span-->
                                        <div class="span8 lightblue">
                                            @Html.LabelFor(model => model.Detalle)
                                            @Html.TextBoxFor(model => model.Detalle, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Detalle)
                                        </div>
                                        <!--/span-->
                                    </div>
                                    <!--/row-->
                                    <div class="row-fluid">
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.IdCondicionCompra, "Condicion compra")
                                            @Html.DropDownList("IdCondicionCompra", null, String.Empty, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.IdCondicionCompra)
                                        </div>
                                        <!--/span-->
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.Validez, "Validez")
                                            @Html.TextBoxFor(model => model.Validez, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Validez)
                                        </div>
                                        <!--/span-->
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.Referencia, "Referencia")
                                            @Html.TextBoxFor(model => model.Referencia, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Referencia)
                                        </div>
                                        <!--/span-->
                                    </div>
                                    <!--/row-->
                                    <div class="row-fluid">
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.IdPlazoEntrega, "Plazo de entrega")
                                            @Html.DropDownList("IdPlazoEntrega", null, String.Empty, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.IdPlazoEntrega)
                                        </div>
                                        <!--/span-->
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.Garantia, "Garantia")
                                            @Html.TextBoxFor(model => model.Garantia, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Garantia)
                                        </div>
                                        <!--/span-->
                                        <div class="span4 lightblue">
                                            @Html.LabelFor(model => model.Contacto, "Contacto")
                                            @Html.TextBoxFor(model => model.Contacto, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Contacto)
                                        </div>
                                        <!--/span-->
                                    </div>
                                    <!--/row-->
                                    <div class="row-fluid">
                                        <div class="span12 lightblue">
                                            @Html.LabelFor(model => model.Observaciones)
                                            @Html.TextAreaFor(model => model.Observaciones, new { @class = "span12" })
                                            @Html.ValidationMessageFor(model => model.Observaciones)
                                        </div>
                                        <!--/span-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--/row-->
                    <div class="row-fluid">
                        <div id="divGrilla" class="span12 lightblue">
                            <style>
                                .ui-jqdialog td {
                                    border: 0px !important;
                                }

                                .ui-jqdialog table {
                                    border: 0px !important;
                                }

                                .ui-jqdialog .ui-jqdialog-titlebar {
                                    padding: 0;
                                    position: relative;
                                }


                                .ui-jqdialog-titlebar {
                                    height: 15px;
                                }

                                .ui-jqdialog button {
                                }

                                /*   http://stackoverflow.com/questions/14954587/jqgrid-for-twitter-bootstrap  */
                                input.ui-pg-input {
                                    width: auto;
                                    padding: 0px;
                                    margin: 0px;
                                    line-height: normal;
                                }

                                select.ui-pg-selbox {
                                    width: auto;
                                    padding: 0px;
                                    margin: 0px;
                                    line-height: normal;
                                }




                                .ui-widget-content button {
                                    background: rgb(231, 231, 231);
                                    color: black !important;
                                }

                                .ui-jqgrid tr.footrow-ltr {
                                    font-size: 9px;
                                }


                                .AltoRenglones tr.jqgrow td /* .ui-jqgrid tr.jqgrow td */ {
                                    height: 30px;
                                }


                                .ui-icon, .ui-widget-content .ui-icon {
                                    /*  background-image: none; */
                                }
                            </style>


                            <table id="Lista" class="scroll separacion AltoRenglones" cellpadding="0" cellspacing="0"
                                   style="font-size:; ">
                                @*/* jugar entre .AltoRenglones y el style de font de la grilla */*@
                            </table>
                            @*<div id="ListaPager" class="scroll" style="text-align: center; height: 30px"></div>*@
                        </div>
                    </div>
                    @* <div id="ListaPager" class="scroll">
                        </div>*@
                    <input type="button" class="btn btn-small" id="addData" value="+ Agregar" />
                    <input type="button" class="btn btn-small" id="edtData" value="Modificar" />
                    <input type="button" class="btn btn-small" id="delData" value="Borrar" />
                    <input type="button" class="btn btn-small" id="" value="Buscar" onclick="conmutarPanelesDerecho();   pageLayout.hide('south'); pageLayout.hide('north'); RefrescaAnchoGrillaDetalle();" />

                    <br />
                    <br />
                    <form id="form1" name="form1" method="post" action="">
                        <style>
                            .subtotales input {
                                height: 15px;
                            }
                        </style>
                        <table class="subtotales span12" border="0" cellspacing="0" cellpadding="0"
                               style="margin: 0px 0px 0px 0px; height: 100; padding: 0px; border-style: none;
            border-width: thin; border-spacing: 0px; font-size: xx-small">
                            <tr>

                                <td width="100">
                                    MONEDA :
                                </td>
                                <td width="100">
                                    @Html.DropDownList("IdMoneda", null, String.Empty, new { @class = "span12" })
                                </td>
                                <td width="100" colspan="2">
                                    SUBTOTAL
                                </td>
                                <td width="100" align="">
                                    <input type="text" name="Subtotal1" id="Subtotal1" style="width: 85%; text-align: right ;"
                                           readonly="readonly" />
                                </td>

                            </tr>
                            <tr>
                                <td width="100">
                                    CONV.PESOS :
                                </td>
                                <td width="100">
                                    @Html.TextBoxFor(model => model.CotizacionMoneda, new { @readonly = "readonly" })
                                </td>

                                <td width="100" colspan="2">
                                    BONIFICACION ITEMS
                                </td>
                                <td width="100">
                                    <input type="text" name="TotalBonificacionItems" id="TotalBonificacionItems" style="width: 85%;
                        text-align: right;" readonly="readonly" />
                                </td>

                            </tr>
                            <tr>
                                <td width="100"></td>
                                <td width="100"></td>
                                <td width="100">
                                    BONIF GLOBAL
                                </td>
                                <td width="100" class="span2">
                                    @Html.TextBoxFor(model => model.Bonificacion, new { @class = "span12" })
                                    @*<input type="text" name="Bonificacion" id="Bonificacion" style="width: 85%" />*@
                                </td>
                                <td width="100">
                                    <input type="text" name="TotalBonificacionGlobal" id="TotalBonificacionGlobal" style="width: 85%;
                        text-align: right;" readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td width="100"></td>
                                <td width="100"></td>
                                <td width="100" colspan="2">
                                    SUBTOTAL
                                </td>
                                <td width="100">
                                    <input type="text" name="Subtotal2" id="Subtotal2" style="width: 85%; text-align: right;"
                                           readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td width="100"></td>
                                <td width="100"></td>
                                <td width="100" colspan="2">
                                    IVA
                                </td>
                                <td width="100">
                                    <input type="text" name="TotalIva" id="TotalIva" style="width: 85%; text-align: right;"
                                           readonly="readonly" />
                                </td>
                            </tr>
                            <tr>
                                <td width="100"></td>
                                <td width="100"></td>
                                <td width="100" colspan="2">
                                    TOTAL
                                </td>
                                <td width="100">
                                    <input type="text" name="Total" id="Total" style="width: 85%; text-align: right;"
                                           readonly="readonly" />
                                </td>
                            </tr>
                        </table>
                    </form>
                    <br />

                </div>

                <div id="pie" style="position: absolute; bottom: -26px; background: rgb(236, 236, 236);
                width: 100%; height: 68px; padding-left: 0; margin-right: 15px;">
                    <hr style="margin: 0; border-top-color: #D8D4D4; border-bottom: 0px solid #ffffff;  " />
                    <div class="row-fluid " style="padding: 11px 0px 0px 0px">
                        <div class="span1 pull-right">
                        </div>
                        <div class="span11 pull-right">
                            @Html.ActionLink("Volver al listado", "Index", null, new { @class = "btn btn-link  pull-right" })

                            <input type="button" id="grabar2" value="Aceptar" class="btn  btn-large btn-primary  pull-right" />

                        </div>
                    </div>
                </div>

            </div>

        </form>

    </div>
    <!--/.fluid-container-->
    <script type="text/javascript">
        $(window).resize(function () {
            RefrescaAnchoGrillaDetalle();

            $("#conscroll").height($(window).height() - 120);
        });






        $(function () {
            mostrarPanelesDerecho();

        })

    </script>
}