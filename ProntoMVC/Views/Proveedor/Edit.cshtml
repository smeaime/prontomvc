@model ProntoMVC.Data.Models.Proveedor
@{
    ViewBag.Title = "Proveedor " + Model.RazonSocial;
}
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formid" }))
{

    @Html.ValidationSummary(true)

        <script src="@Url.Content("~/Scripts/jsProveedor.js?1519")"  type="text/javascript"></script>       @*aparentemente tengo que llamarla despues de cargar las div*@
   
    

    
    <div class="container-fluid">
        @*        <legend>Proveedor</legend>
*@
        <div>@Html.Hidden("IdProveedor", Model.IdProveedor)</div>
        <div class="row-fluid" style="margin-bottom: 15px; margin-top: 5px;">
            @* <div class="span5 lightblue" style="font-weight: bold; font-size: 34px; vertical-align: "> *@
            <div class="" style='font-size: 34px; margin-top: 5px; height: 45px; font-weight: 500;
                text-shadow: 0 1px 0  lightgray; font-family: "Segoe UI Web Regular", "Segoe UI", "Lucida", Tahoma, Arial,"sans-serif"'>
                <span class="span1" style="padding-top: 15px; width: 160px; margin-right: 10px">Proveedor</span>
                @Html.TextBox("CopiaPuntoVenta", Model.RazonSocial, new { style = "height: 50px ;  font-weight: 500; text-shadow: 0 1px 0  lightgray; font-size: 34px; border: 0; padding: 0 ; text-align: left; background: transparent;  font-family: 'Segoe UI Web Regular', 'Segoe UI', 'Lucida', Tahoma, Arial,'sans-serif';                    -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;                   ", @class = "span8", @readonly = "readonly" })
                
            </div>
            <script>
                $(function () {

                    function resizeInput() {
                        // $(this).attr('size', $(this).val().length + 2);
                        $(this).css('width', $(this).val().length * 32);
                    }


                    // $('#PuntoVenta').keyup(resizeInput).each(resizeInput);

                    //    $('#NumeroFactura').css('width', $('#NumeroFactura').val().length * 21);

                })
            </script>
        </div>
        <style>
            .nav-tabs > li > a
            {
                border: 1px solid rgba(0, 0, 0, 0.03); /* !important; */
            }
        </style>
        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
            <li class="active"><a href="#red" data-toggle="tab">Datos generales</a></li>
            <li><a href="#contactos" data-toggle="tab">Contactos</a></li>
            <li><a href="#retenc" data-toggle="tab">Retenciones</a></li>
            <li><a href="#exporta" data-toggle="tab">Exportaciones</a></li>
            <li><a href="#contables" data-toggle="tab">Datos contables</a></li>
            <li><a href="#lugares" data-toggle="tab">Lugares de entrega</a></li>
        </ul>
        @*<div class="alert">
            Allllllllll
            @Html.Raw(ViewBag.Errores)
            <button type="button" class="close" data-dismiss="alert">
                &times;</button>
        </div>*@
        <div id="my-tab-content" class="tab-content">
            <div class="tab-pane active" id="red">
                <div class="row-fluid">
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.CodigoProveedor, "Codigo")
                        @Html.TextBoxFor(model => model.CodigoProveedor, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.CodigoProveedor)
                    </div>
                    <div class="span4 lightblue">
                        @*   @Html.Hidden( "TipoProveedor", Model.TipoProveedor)*@
                        @Html.LabelFor(model => model.TipoProveedor, "Tipo")
                        @Html.RadioButtonFor(model => model.TipoProveedor, "1") CL
                        @Html.RadioButtonFor(model => model.TipoProveedor, "2") CE
                        @Html.RadioButtonFor(model => model.TipoProveedor, "3") CV
                        @Html.RadioButtonFor(model => model.TipoProveedor, "4") CO
                    </div>
                 
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.RazonSocial, "Razon Social")
                        @Html.TextBoxFor(model => model.RazonSocial, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.RazonSocial)
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.NombreFantasia, "Nombre Comercial")
                        @Html.TextBoxFor(model => model.NombreFantasia, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.NombreFantasia)
                    </div>
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.IdEstado, "Estado actual")
                        @Html.DropDownList("IdEstado")
                        @Html.ValidationMessageFor(model => model.IdEstado)
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.Direccion)
                        @Html.TextBoxFor(model => model.Direccion, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Direccion)
                    </div>
                    <div class="span4 lightblue">
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @*  @Html.LabelFor(model => model.IdLocalidad, "Localidad")
                        @Html.DropDownList("IdLocalidad", String.Empty)
                        @Html.ValidationMessageFor(model => model.IdLocalidad)
                        <script>
                            $('#IdLocalidad').change(function () {
                                $('IdProvincia').val(100);
                                $.ajax({
                                    type: 'POST',
                                    contentType: 'application/json; charset=utf-8',
                                    url: '/Pronto2/Proveedor/GetLocalidades',
                                    dataType: 'json',
                                    data: dataToSend,
                                    success: function (result) {
                                        if (result) {
                                            grid1.trigger('reloadGrid');
                                            window.location.replace(ROOT + "Proveedor/index");
                                        } else {
                                            alert('No se pudo grabar el comprobante.');
                                        }
                                    }
                                });


                            });
                        </script>*@ @*---------------------------------------------------------------------------------------*@
                        @*---------------------------------------------------------------------------------------*@
                        @Html.HiddenFor(model => model.IdLocalidad)
                        @Html.LabelFor(model => model.IdLocalidad, "Localidad")
                        @Html.TextBox("Localidad", (Model.Localidad == null ? "" : Model.Localidad.Nombre), new { @class = "span10" })
                        <script type="text/jscript">

                            $("#Localidad").autocomplete({
                                source: '@Url.Action("GetLocalidadesAutocomplete")',
                                minLength: 0,
                                messages: { noResults: "", results: function () { } },
                                select: function (event, ui) {
                                    $("#IdLocalidad").val(ui.item.id);
                                    $("#Localidad").val(ui.item.value);
                                    $("#IdProvincia").val(ui.item.idprovincia);

                                    event.preventDefault();
                                }

                            });

                        </script>
                        @*---------------------------------------------------------------------------------------*@
                        @*---------------------------------------------------------------------------------------*@
                        @*---------------------------------------------------------------------------------------*@
                        @*---------------------------------------------------------------------------------------*@
                    </div>
                    <div class="span4 lightblue">
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.Provincia, "Provincia")
                        @Html.DropDownList("IdProvincia", String.Empty)
                        @Html.ValidationMessageFor(model => model.Provincia)
                    </div>
                    <div class="span4 lightblue">
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.CodigoPostal, "Codigo Postal")
                        @Html.TextBoxFor(model => model.CodigoPostal, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.CodigoPostal)
                    </div>
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.Email)
                        @Html.TextBoxFor(model => model.Email, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Email)
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.IdPais, "Pais")
                        @Html.DropDownList("IdPais", String.Empty)
                        @Html.ValidationMessageFor(model => model.Pais)
                    </div>
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.Cuit)
                        @Html.TextBoxFor(model => model.Cuit, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Cuit)
                    </div>
                </div>
                <div class="row-fluid">
                    
                </div>
                <div class="row-fluid">
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.Fax)
                        @Html.TextBoxFor(model => model.Fax, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Fax)
                    </div>
                 
                </div>
           
                <div class="row-fluid">
                    <div class="span11 lightblue">
                        @Html.LabelFor(model => model.Observaciones)
                        @Html.TextAreaFor(model => model.Observaciones, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Observaciones)
                    </div>
                    <!--/span-->
                </div>
            </div>
            <div class="tab-pane" id="contactos">
                <div class="row-fluid">
                    <div class="span11 lightblue">
                        @Html.LabelFor(model => model.Contacto, "Contacto Principal")
                        @Html.TextBoxFor(model => model.Contacto, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Contacto)
                    </div>
                    <!--/span-->
                </div>
                <div class="row-fluid">
                    <div class="span12 lightblue">
                        @*  ////////////////////////////////////////////////////////////////////
                    ////////////////////////////////////////////////////////////////////
                    ////////////////////////////////////////////////////////////////////*@
                        <table id="ListaContactos" class="scroll" cellpadding="0" cellspacing="0" style="width: 100%">
                        </table>
                        @*pinta que al no usar el tag de cierre separado se vuelve loco*@
                        <div id="PagerContactos" class="scroll">
                        </div>
                        <input type="button" id="addDataContactos" class="btn btn-mini" value="Agregar item" />
                        <input type="button" id="edtDataContactos" class="btn btn-mini" value="Modificar item" />
                        <input type="button" id="delDataContactos" class="btn btn-mini" value="Borrar item" />
                        @* ////////////////////////////////////////////////////////////////////
                    ////////////////////////////////////////////////////////////////////
                    ////////////////////////////////////////////////////////////////////
                    ////////////////////////////////////////////////////////////////////*@
                    </div>
                    <!--/span-->
                </div>
            </div>
            <div class="tab-pane" id="retenc">
                Ingresos brutos
                <hr />
                <div class="row-fluid">
                    <div class="span6 lightblue">
                        @Html.LabelFor(model => model.IBCondicion, "Condicion")
                        @Html.RadioButtonFor(model => model.IBCondicion, "1") Exento
                        @Html.RadioButtonFor(model => model.IBCondicion, "2") Inscripto Jurisdicion Local
                        @Html.RadioButtonFor(model => model.IBCondicion, "3") Inscripto convenio multilateral
                        @Html.RadioButtonFor(model => model.IBCondicion, "4") No alcanzado
                    </div>
                    <div class="span4 lightblue">
                        @Html.LabelFor(model => model.IBNumeroInscripcion, "Nro. Inscripcion")
                        @Html.TextBoxFor(model => model.IBNumeroInscripcion, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.IBNumeroInscripcion)
                    </div>
                </div>
                <div class="row-fluid">
                   
                </div>
               
                <h5>
                    Buenos Aires</h5>
                <div class="row-fluid">
                    <div class="span1 lightblue">
                        @Html.LabelFor(model => model.PorcentajeIBDirecto, "%IB directo")
                        @Html.TextBoxFor(model => model.PorcentajeIBDirecto, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.PorcentajeIBDirecto)
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.FechaInicioVigenciaIBDirecto, "Fecha inicio vigencia")
                        @Html.TextBoxFor(model => model.FechaInicioVigenciaIBDirecto, new Dictionary<string, object> { { "class", "span12" }, { "placeholder", "dd/mm/yyyy" } })
                        @Html.ValidationMessageFor(model => model.FechaInicioVigenciaIBDirecto)
                        <script type="text/jscript">
                            $("#FechaInicioVigenciaIBDirecto").datepicker({
                                changeMonth: true,
                                changeYear: true
                                //numberOfMonths: 2,
                            });
                        </script>
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.FechaFinVigenciaIBDirecto, "Fecha inicio vigencia")
                        @Html.TextBoxFor(model => model.FechaFinVigenciaIBDirecto, new Dictionary<string, object> { { "class", "span12" }, { "placeholder", "dd/mm/yyyy" } })
                        @Html.ValidationMessageFor(model => model.FechaFinVigenciaIBDirecto)
                        <script type="text/jscript">
                            $("#FechaFinVigenciaIBDirecto").datepicker({
                                changeMonth: true,
                                changeYear: true
                                //numberOfMonths: 2,
                            });
                        </script>
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.GrupoIIBB, "Grupo")
                        @Html.TextBoxFor(model => model.GrupoIIBB, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.GrupoIIBB)
                    </div>
                </div>
                <h5>
                    Capital</h5>
                <div class="row-fluid">
                    <div class="span1 lightblue">
                        @Html.LabelFor(model => model.PorcentajeIBDirectoCapital, "%IB directo")
                        @Html.TextBoxFor(model => model.PorcentajeIBDirectoCapital, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.PorcentajeIBDirectoCapital)
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.FechaFinVigenciaIBDirectoCapital, "Fecha inicio vigencia")
                        @Html.TextBoxFor(model => model.FechaFinVigenciaIBDirectoCapital, new Dictionary<string, object> { { "class", "span12" }, { "placeholder", "dd/mm/yyyy" } })
                        @Html.ValidationMessageFor(model => model.FechaFinVigenciaIBDirectoCapital)
                        <script type="text/jscript">
                            $("#FechaFinVigenciaIBDirectoCapital").datepicker({
                                changeMonth: true,
                                changeYear: true
                                //numberOfMonths: 2,
                            });
                        </script>
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.FechaFinVigenciaIBDirectoCapital, "Fecha inicio vigencia")
                        @Html.TextBoxFor(model => model.FechaFinVigenciaIBDirectoCapital, new Dictionary<string, object> { { "class", "span12" }, { "placeholder", "dd/mm/yyyy" } })
                        @Html.ValidationMessageFor(model => model.FechaFinVigenciaIBDirectoCapital)
                        <script type="text/jscript">
                            $("#FechaFinVigenciaIBDirectoCapital").datepicker({
                                changeMonth: true,
                                changeYear: true
                                //numberOfMonths: 2,
                            });
                        </script>
                    </div>
                    <div class="span2 lightblue">
                        @Html.LabelFor(model => model.GrupoIIBBCapital, "Grupo")
                        @Html.TextBoxFor(model => model.GrupoIIBBCapital, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.GrupoIIBBCapital)
                    </div>
                </div>
                <h5>
                    Percepcion IVA</h5>
                <hr />
           
                <hr />
               
            </div>
            <div class="tab-pane" id="exporta">
                <div class="row-fluid">
                    <div class="span11 lightblue">
                        @Html.LabelFor(model => model.IBNumeroInscripcion, "Numero de inscripcion")
                        @Html.TextBoxFor(model => model.IBNumeroInscripcion, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.IBNumeroInscripcion)
                    </div>
                    <!--/span-->
                </div>
                <div class="row-fluid">
                    <div class="span11 lightblue">
                        @Html.LabelFor(model => model.Importaciones_DenominacionInscripcion, "Denominacion inscripcion")
                        @Html.TextBoxFor(model => model.Importaciones_DenominacionInscripcion, new { @class = "span12" })
                        @Html.ValidationMessageFor(model => model.Importaciones_DenominacionInscripcion)
                    </div>
                    <!--/span-->
                </div>
            </div>
         
        </div>
        <br />
        <br />
        <div>
            @*http://stackoverflow.com/questions/7292590/problem-with-different-model-type-in-partial-view*@
            @*Even if the types match, you can get this error when a null is passed to a partial view,*@
            @*http://stackoverflow.com/questions/2315129/the-model-item-passed-into-the-dictionary-is-of-type-mvc-models-modela-but-thi*@
            @*http://stackoverflow.com/questions/650393/renderpartial-with-null-model-gets-passed-the-wrong-type*@
            @*http://stackoverflow.com/questions/6381574/how-to-pass-parent-model-from-inside-partial-view*@
            @*ok, pero el problema no es tanto como pasar el IdProveedor al modelogrilla anidado (agrego una property y listo), sino
            cómo le devuelve el modelogrilla anidado los rengloenes al modelo de la entidad*@
            @*           @{
                Model.grilla.constructor();
            }
            @{Html.RenderPartial("_GrillaContactos", Model.grilla, new ViewDataDictionary());}
 *@ @*@{Html.RenderAction("_GrillaContactos", null, new { id = Model.IdProveedor });}*@ @* @Html.EditorFor(x => Model.grilla) *@
        </div>
        <br />
        <br />
        <br />
        <div class="row-fluid">
            @*<div class="navbar navbar-fixed-bottom">*@
            <div class="span11 lightblue">
                @* <input type="submit" id="grabar" value="Aceptar" class="btn btn-primary" />*@
                <input type="button" id="grabar" value="Aceptar" class="btn btn-primary" />
                @*<input type="button" id="grabarNormal" value="Guardar generico" class="btn btn-primary" />*@
                @*<input type="button" id="Guardar" value="Borrar" class="butCancela" />*@
                @if (Model.IdProveedor > 0)
                { @Html.ActionLink("Borrar", "DeleteConfirmedDirecto", new { id = Model.IdProveedor }, new { @class = "btn btn-link" }) 
                }
                @Html.ActionLink("Volver al listado", "Index", null, new { @class = "btn btn-link" })
                @*<input type="submit" id="grabar2" value="Guardar 2" class="btn btn-primary" />*@
            </div>
            @*</div>*@
        </div>
    </div>
    <!--/.fluid-container-->
}
