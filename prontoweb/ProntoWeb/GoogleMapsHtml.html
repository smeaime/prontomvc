
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0" />
    <style type="text/css">
         /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
         #map {
             height: 100%;
         }
         /* Optional: Makes the sample page fill the window. */
         html, body {
             height: 100%;
             margin: 0;
             padding: 0;
         }
    </style>
</head>
<body id="map-container">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

    <div id="map"></div>
    <script>

        var map 

        // This example creates circles on the map, representing populations in North
        // America.

        // First, create an object containing LatLng and population for each city.
        var citymap = {
            chicago: {
                center: { lat: 41.878, lng: -87.629 },
                population: 2714856
            },
            newyork: {
                center: { lat: 40.714, lng: -74.005 },
                population: 8405837
            },
            losangeles: {
                center: { lat: 34.052, lng: -118.243 },
                population: 3857799
            },
            vancouver: {
                center: { lat: 49.25, lng: -123.1 },
                population: 603502
            }
        };

        function initMap() {
            // Create the map.
            //var map = new google.maps.Map(document.getElementById('map'), {
            //    zoom: 4,
            //    center: { lat: 37.090, lng: -95.712 },
            //    mapTypeId: 'terrain'
            //});

            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -35, lng: -65 },
                zoom: 6
            });


            // Construct the circle for each value in citymap.
            // Note: We scale the area of the circle based on the population.
            for (var city in citymap) {
                // Add the circle for this city to the map.
                var cityCircle = new google.maps.Circle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.35,
                    map: map,
                    center: citymap[city].center,
                    radius: Math.sqrt(citymap[city].population) * 100
                });
            }

            datos();
        }







        function datos() {

            var dataRows;
            //var dataRows = [{
            //    id: 1,
            //    geom: "LINESTRING(-1.131510412 52.65531, -1.13286 52.65559)"
            //}];

            $.ajax({
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                url: "WebServiceCartas.asmx/MapaGeoJSON",
                dataType: 'json',
                //data: JSON.stringify({
                //    idcarta: gridId,
                //    idsituacion: datos.idsituacion,
                //    sObservacionesSituacion: dataFromTheRow.ObservacionesSituacion
                //}),
                success: function (result) {
                    var dat = JSON.parse(result.d);

                    for (var city in dat) {
                        // Add the circle for this city to the map.
                        if (dat[city].lat==null) continue;

                        var cityCircle = new google.maps.Circle({

                            strokeColor: '#FF0000',
                            strokeOpacity: 0.8,
                            strokeWeight: 2,
                            fillColor: '#FF0000',
                            fillOpacity: 0.35,
                            map: map,

                            center: { lat: dat[city].lat, lng: dat[city].lng },
                            radius: Math.sqrt(dat[city].total) * 100

                        });
                    }
                },
                error: function (xhr, textStatus, exceptionThrown) {
                },
            });








            
            //features = [];
            //dataRows.forEach(function (row) {
            //    var coords = row.geom.replace("(", "[").replace(")", "]").substring(row.geom.indexOf("("), row.geom.length);
            //    features.push({
            //        "type": "Feature",
            //        "properties": {
            //            "id": row.id
            //        },
            //        "geometry": {
            //            "type": row.geom.substring(0, row.geom.indexOf("(")),
            //            "coordinates": coords
            //        }
            //    });
            //});

            //return features;
        }







        function geocode() {
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'address': 'miami, us' }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    alert("location : " + results[0].geometry.location.lat() + " " + results[0].geometry.location.lng());
                } else {
                    alert("Something got wrong " + status);
                }
            });
        }




    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWNbUasHY_ay5SMIpz02pu534Y1cif72k&callback=initMap"></script>
</body>
</html>





<!-- 


<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0" />
    <style type="text/css">
         /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
         #map {
             height: 100%;
         }
         /* Optional: Makes the sample page fill the window. */
         html, body {
             height: 100%;
             margin: 0;
             padding: 0;
         }
    </style>
</head>
<body id="map-container">
    <div id="map"></div>
    <script>
      var map;

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 20, lng: -160 },
          zoom: 2,
          styles: mapStyle
        });

        map.data.setStyle(styleFeature);

        // Get the earthquake data (JSONP format)
        // This feed is a copy from the USGS feed, you can find the originals here:
        //   http://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php
        var script = document.createElement('script');
        script.setAttribute(
            'src',
            'https://storage.googleapis.com/mapsdevsite/json/quakes.geo.json');
        document.getElementsByTagName('head')[0].appendChild(script);
      }

      // Defines the callback function referenced in the jsonp file.
      function eqfeed_callback(data) {
        map.data.addGeoJson(data);
      }

      function styleFeature(feature) {
        var low = [151, 83, 34];   // color of mag 1.0
        var high = [5, 69, 54];  // color of mag 6.0 and above
        var minMag = 1.0;
        var maxMag = 6.0;

        // fraction represents where the value sits between the min and max
        var fraction = (Math.min(feature.getProperty('mag'), maxMag) - minMag) /
            (maxMag - minMag);

        var color = interpolateHsl(low, high, fraction);

        return {
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            strokeWeight: 0.5,
            strokeColor: '#fff',
            fillColor: color,
            fillOpacity: 2 / feature.getProperty('mag'),
            // while an exponent would technically be correct, quadratic looks nicer
            scale: Math.pow(feature.getProperty('mag'), 2)
          },
          zIndex: Math.floor(feature.getProperty('mag'))
        };
      }

      function interpolateHsl(lowHsl, highHsl, fraction) {
        var color = [];
        for (var i = 0; i < 3; i++) {
          // Calculate color based on the fraction.
          color[i] = (highHsl[i] - lowHsl[i]) * fraction + lowHsl[i];
        }

        return 'hsl(' + color[0] + ',' + color[1] + '%,' + color[2] + '%)';
      }

      var mapStyle = [{
        'featureType': 'all',
        'elementType': 'all',
        'stylers': [{'visibility': 'off'}]
      }, {
        'featureType': 'landscape',
        'elementType': 'geometry',
        'stylers': [{'visibility': 'on'}, {'color': '#fcfcfc'}]
      }, {
        'featureType': 'water',
        'elementType': 'labels',
        'stylers': [{'visibility': 'off'}]
      }, {
        'featureType': 'water',
        'elementType': 'geometry',
        'stylers': [{'visibility': 'on'}, {'hue': '#5f94ff'}, {'lightness': 60}]
      }];
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWNbUasHY_ay5SMIpz02pu534Y1cif72k&callback=initMap">
    </script>
</body>
</html>




 -->